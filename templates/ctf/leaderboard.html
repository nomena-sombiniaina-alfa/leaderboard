{% extends 'container.html' %}

{% block content %}
    <h1 class="title h1 text-white text-center">Leaderboard</h1>

    <div class="container">
        {% for team in top_teams %}
            {% if forloop.first %}
                <div class="my-3">
                    <div class="d-flex flex-row justify-content-start align-items-center">        
            {% endif %}
            
            {% if team.profile == user %}
                <div class="bg-warning p-2 col-4 border border-secondary rounded">
                
            {% else %}
                <div class="bg-light p-2 col-4 border border-secondary rounded">
                
            {% endif %}
                
                <div class="row">
                    <div class="col-10">
                        <h5 style="width: 100%;">{{team.name}}</h5>
                        <p>From : {{team.city}}</p>
                    </div>
                    <div class="col-2 text-success">{{forloop.counter}}</div>
                </div>
                <div class="d-flex flex-row align-items-center justify-content-around">
                    <div>
                        <small class="text-center">Flag validated : </small>
                        <p class="text-center" >{{ team.flag_validated }}</p>
                    </div>
                    <div>
                        <small class="text-center">Last flag found : </small>
                        <p class="text-center">{{ team.last_flag_found }}</p>
                    </div>
                </div>
            </div>
            {% if forloop.counter|divisibleby:3 %}
                    </div>
                </div>
                <div class="my-3">
                    <div class="d-flex flex-row justify-content-start align-items-center">        
            {% endif %}
            {% if forloop.last %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}

        {% for team in teams %}
            <div class="d-flex flex-row my-2 bg-dark">
                    
                    {% if team.profile == user %}
                        <div class="col-1 d-flex bg-danger text-warning justify-content-center align-items-center">
                            YOU
                        </div>
                    {% else %}
                        <div class="col-1 d-flex bg-success text-warning justify-content-center align-items-center">
                            {% with top_teams|length as i %}
                                {{forloop.counter|add:i}}
                            {% endwith %}
                        </div>
                    {% endif %}
                        
                        
                        
                    <div class="bg-light col-11">
                        <h3 class="title h3 text-center">{{team.name}}</h3>
                        <div class=" d-flex flex-row px-5">
                            <div class="col-4 text-center">
                                <b>Flag found : </b> {{team.flag_validated}}
                            </div>
                            <div class="col-4 text-center">
                                <b>Last flag found : </b> {{team.last_flag_found}}
                            </div>
                            <div class="col-4 text-center">
                                <b>From : </b> {{team.city}}
                            </div>
                        </div>
                    </div>
            </div>
        {% endfor %}
    </div>
{% endblock content %}
    

    